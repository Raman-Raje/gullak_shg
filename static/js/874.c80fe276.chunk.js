"use strict";(self.webpackChunkgullak_shg=self.webpackChunkgullak_shg||[]).push([[874],{59101:(e,n,s)=>{s.d(n,{A:()=>d});var r=s(72119),i=s(74068),t=s.n(i),a=s(25869),l=s(70579);const o=r.Ay.button.withConfig({componentId:"sc-s7so8f-0"})([""," font-size:",";padding:4px 8px;border-radius:8px;color:",";background-color:",";min-height:20px;gap:4px;color:",";transition:color var(--transition),background-color var(--transition);font-family:",";&:hover,&:focus{background-color:",";color:#fff;}&.active{color:",";background-color:",";}"],a.Uu.center,a.yM[12],a.Tj.blue,t()("theme",{light:a.BB.bodyBg,dark:a.XT.bodyBg}),a.Tj.blue,a.lG.accent,a.Tj.blue,t()("theme",{light:a.Tj.blue,dark:a.BB.bodyBg}),t()("theme",{light:a.BB.highlight,dark:a.BB.text})),d=e=>{let{text:n,handler:s,icon:r,style:i,className:t}=e;return(0,l.jsxs)(o,{className:t?"pill ".concat(t):"pill",onClick:s,style:i,children:[r?(0,l.jsx)("i",{className:"icon-".concat(r)}):null," ",n]})}},77874:(e,n,s)=>{s.r(n),s.d(n,{default:()=>L});var r=s(75977),i=s(56013),t=s(43778),a=s(58422),l=s(90385),o=s(2950),d=s(95353),c=s(72119),h=s(74068),u=s.n(h),p=s(25869);const m=(0,c.Ay)(d.$).withConfig({componentId:"sc-ovkct3-0"})(["padding:36px 24px;",";gap:8px;.header{display:flex;",";gap:20px;.user .user-option{display:flex;align-items:center;gap:20px;span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:100px;}}}"],p.Uu.col,p.Uu.between),x=c.Ay.ul.withConfig({componentId:"sc-ovkct3-1"})(["",";border-top:",";padding-top:10px;gap:20px;"],p.Uu.col,u()("theme",{light:p.zb.dashedLight,dark:p.zb.dashedDark})),g=c.Ay.li.withConfig({componentId:"sc-ovkct3-2"})(["display:flex;align-items:center;gap:20px;padding:10px;border-radius:8px;background-color:",";box-shadow:",";transition:background-color var(--transition);&:hover{background-color:",";}.avatar{flex-shrink:0;}.info{",";flex:1;.name{font-weight:500;font-size:",";color:",";}}.actions{flex-shrink:0;}"],u()("theme",{light:p.Tj.gray_50,dark:p.Tj.gray_800}),p.zb.widgetShadow,u()("theme",{light:p.Tj.gray_100,dark:p.Tj.gray_700}),p.Uu.col,p.yM[16],p.Tj.text.primary);var b=s(97424),f=s(63516),j=s(59897),y=s(80899),v=s(39335);const k=y.Ik().shape({email:y.Yj().trim().lowercase().email().when("phone",{is:e=>!e||0===e.length,then:()=>y.Yj().email().required("phone or email is required")}),phone:y.Yj().matches(v.x2,"Invalid phone number").when("email",{is:e=>!e||0===e.length,then:()=>y.Yj().required("phone or email is required")})},[["email","phone"]]);var w=s(64265),A=s(28942),_=s(70579);const B={email:"",phone:""},T=e=>{let{handler:n,setUsers:s}=e;return(0,_.jsx)(f.l1,{initialValues:B,validationSchema:k,onSubmit:async(e,n)=>{let{setSubmitting:r,setErrors:i,resetForm:t}=n;r(!0),console.log("values"),console.log(e);const{data:a,error:l}=await A.A.rpc("fetch_user_if_exists",{phone_number_input:e.phone,email_input:e.email});if(l)return i({email:l.message}),void r(!1);console.log("data"),console.log(a),r(!1),s(a),t()},children:e=>{let{values:n,setFieldValue:s,errors:r}=e;return(0,_.jsxs)(f.lV,{children:[(0,_.jsxs)(w.eB,{children:[(0,_.jsx)(j.BY,{name:"email",type:"text",label:"Email",required:!0,placeholder:"Email Address"}),(0,_.jsx)(j.BY,{name:"phone",type:"number",label:"Phone",required:!0,placeholder:"Phone Number"})]}),(0,_.jsx)("div",{style:{marginTop:10},children:(0,_.jsx)(b.A,{text:"Search",type:"submit"})})]})}})};var S=s(76491),N=s(65043),C=s(84381),U=s(59101),Y=s(22980),I=s(15298);const M=e=>{let{isVisible:n,visibilityHandler:s}=e;const[r,i]=(0,N.useState)([]),t=(0,Y.A)(),{notify:a}=(0,I.A)(),l=(0,N.useCallback)((()=>{s(!1)}),[s]);return(0,_.jsx)(d.A,{isVisible:n,visibilityHandler:s,children:(0,_.jsxs)(m,{children:[(0,_.jsxs)("div",{className:"header",children:[(0,_.jsx)("h2",{children:"Add Member"}),(0,_.jsx)(S.A,{shape:"round error",icon:"close",width:"30px",handler:l})]}),(0,_.jsx)("div",{className:"body",children:(0,_.jsx)(T,{handler:s,setUsers:i})}),r.length>0&&(0,_.jsx)(x,{children:r.map((e=>(0,_.jsxs)(g,{children:[(0,_.jsx)("div",{className:"avatar",children:(0,_.jsx)(C.A,{full_name:e.full_name})}),(0,_.jsx)("div",{className:"info",children:(0,_.jsx)("span",{className:"name",children:e.full_name})}),(0,_.jsx)("div",{className:"actions",children:(0,_.jsx)(U.A,{text:"Invite",handler:()=>(async e=>{try{const{error:n}=await A.A.rpc("add_user_to_membership",{user_id_input:e,group_id_input:t});if(n)throw n;a("User added to group")}catch(n){a(n.message,"error")}finally{s(!1)}})(e.user_id)})})]},e.user_id)))})]})})};var V,q,z=s(35077),E=s(83687),G=s(67412),H=s(57528);const P=(0,c.Ay)(E.ZT)(V||(V=(0,H.A)(["\n  "," {\n    flex-direction: row;\n    ",";\n\n    .gender {\n      max-width: 300px;\n    }\n  }\n"])),p.fi.tablet,p.Uu.between),R=c.Ay.button(q||(q=(0,H.A)(["\n  font-family: ",";\n  font-size: ",";\n  font-weight: 500;\n  color: ",";\n\n  &.disabled {\n    pointer-events: none;\n    opacity: .5;\n  }\n"])),p.lG.accent,p.yM[24],u()("theme",{light:p.BB.text,dark:p.XT.text}));var X=s(87460),F=s(79456),$=s(79547);const D=()=>{const e=(0,F.d4)($.oe),{assigned_role:n}=e,[s,r]=(0,N.useState)(!1),[d,c]=(0,N.useState)(!1),[h,u]=(0,N.useState)([]),[p,m]=(0,N.useState)(null),x=(0,N.useRef)(null),g=(0,N.useRef)(null),b=(0,Y.A)(),f=(0,N.useCallback)((async()=>{c(!0),m(null);try{const{data:e,error:n}=await A.A.rpc("fetch_group_members",{group_id_input:b});if(n)throw n;u(e)}catch(p){m(p.message)}finally{c(!1)}}),[b]);(0,N.useEffect)((()=>{b&&f()}),[b,f]);const{status:j,setStatus:y,getStatus:v}=(0,G.A)(h);return(0,_.jsxs)(t.A,{name:"GroupMembers",children:[(0,_.jsx)(a.A,{title:"Members",style:{paddingBottom:0},elRef:x,children:"admin"===n&&(0,_.jsx)(R,{onClick:()=>r(!0),className:s?"disabled":"","aria-label":"Add new Member",children:"+"})}),(0,_.jsx)(E.Y9,{sidePadding:!0,children:(0,_.jsx)(P,{children:(0,_.jsx)(i.A,{options:X.VX,state:j,handler:y})})}),(0,_.jsxs)(l.A,{children:[d?(0,_.jsx)(z.A,{}):p?(0,_.jsxs)("div",{children:["Error: ",p]}):(0,_.jsx)(o.A,{type:"member",arr:"all"===j.value?h:v(j)}),(0,_.jsx)("div",{ref:g,style:{overflowY:s?"hidden":"auto"},children:(0,_.jsx)(M,{isVisible:s,visibilityHandler:r})})]})]})},L=()=>(0,_.jsx)(r.A,{children:(0,_.jsx)("div",{children:(0,_.jsx)(D,{})},"group_members")})},39335:(e,n,s)=>{s.d(n,{x2:()=>r});const r=/^\d{10}$/}}]);
//# sourceMappingURL=874.c80fe276.chunk.js.map